<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>500 | System Collapse</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: 'Inter', sans-serif; }
        
        /* UI Overlay */
        .ui-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: white;
            z-index: 10;
            pointer-events: none; /* Let clicks pass through to 3D if needed */
        }

        h1 {
            font-size: clamp(5rem, 15vw, 12rem);
            margin: 0;
            font-weight: 900;
            letter-spacing: -0.05em;
            text-shadow: 0 0 30px rgba(255,255,255,0.1);
        }

        p {
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.3em;
            color: #666;
            margin-top: -20px;
        }

        .back-link {
            display: inline-block;
            margin-top: 40px;
            padding: 12px 30px;
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            text-decoration: none;
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 0.1em;
            pointer-events: all;
            transition: 0.3s;
        }

        .back-link:hover {
            background: white;
            color: black;
            box-shadow: 0 0 20px rgba(255,255,255,0.4);
        }
    </style>
</head>
<body>

    <div class="ui-container">
        <h1>500</h1>
        <p>Internal Server Gravity Failure</p>
        <a href="/" class="back-link">Reboot Connection</a>
    </div>

    <script>
        let scene, camera, renderer, plane, light;
        const mouse = new THREE.Vector2();
        const target = new THREE.Vector2();

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            // Create a fine-detailed grid plane
            const geometry = new THREE.PlaneGeometry(20, 10, 64, 64);
            const material = new THREE.MeshStandardMaterial({ 
                color: 0x111111, 
                wireframe: true,
                transparent: true,
                opacity: 0.4
            });
            plane = new THREE.Mesh(geometry, material);
            plane.rotation.x = -0.5;
            scene.add(plane);

            // Add a point light that follows the mouse
            light = new THREE.PointLight(0xffffff, 2, 10);
            light.position.set(0, 0, 2);
            scene.add(light);

            // Add ambient light for subtle visibility
            const ambient = new THREE.AmbientLight(0x404040, 0.5);
            scene.add(ambient);

            window.addEventListener('mousemove', onMouseMove);
            window.addEventListener('resize', onResize);
            animate();
        }

        function onMouseMove(event) {
            // Convert mouse pos to normalized device coordinates (-1 to +1)
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
        }

        function onResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);

            // Smoothly move the light toward the mouse
            target.x += (mouse.x * 5 - target.x) * 0.1;
            target.y += (mouse.y * 3 - target.y) * 0.1;
            
            light.position.x = target.x;
            light.position.y = target.y;

            // Manipulate vertices for the 3D "warping" effect
            const positions = plane.geometry.attributes.position;
            for (let i = 0; i < positions.count; i++) {
                const x = positions.getX(i);
                const y = positions.getY(i);
                
                // Calculate distance from vertex to light
                const distance = Math.sqrt(Math.pow(x - target.x, 2) + Math.pow(y - target.y, 2));
                
                // Create a "dent" or ripple effect
                const z = Math.sin(distance * -2 + Date.now() * 0.002) * 0.2;
                const warp = Math.exp(-Math.pow(distance, 2) / 2) * 1.5;
                
                positions.setZ(i, z + warp);
            }
            positions.needsUpdate = true;

            renderer.render(scene, camera);
        }

        init();
    </script>
</body>
</html>